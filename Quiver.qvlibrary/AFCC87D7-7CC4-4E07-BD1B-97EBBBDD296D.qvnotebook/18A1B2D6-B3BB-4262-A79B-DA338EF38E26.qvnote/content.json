{
  "title": "Webpack.dev.js",
  "cells": [
    {
      "type": "code",
      "language": "javascript",
      "data": "const webpack = require('webpack');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ManifestPlugin = require('webpack-manifest-plugin');\nconst WebpackBar = require('webpackbar');\nconst Jarvis = require('webpack-jarvis');\nconst path = require('./path-variables'); // 路径\n\n// 配置项\nconst port = 8888;\nconst host = 'local.msz.jd.com';\n// const host = 'localhost';\n\n// 文件路径\nconst TEMPLATE_PATH = `${path.SRC_PATH}/views/page/index.html`;\nconst ENTRY_PATH = `${path.STATIC_PATH}/js/homepage/main.js`;\n\nmodule.exports = {\n    mode: 'development',\n    // devtool: 'cheap-module-eval-source-map',\n    devtool: 'eval',\n    entry: {\n        app: ['webpack/hot/only-dev-server', 'react-hot-loader/patch', ENTRY_PATH]\n    },\n    output: {\n        filename: 'static/js/[name].bundle.js',\n        chunkFilename: 'static/js/[name].bundle.js'\n    },\n    plugins: [\n        new Jarvis({\n            port: 8889\n        }),\n        new WebpackBar({\n            name: 'msz',\n            color: '#06A102',\n            profile: true\n        }),\n        // TODO:合并插件配置\n        new HtmlWebpackPlugin({\n            title: '商智移动版',\n            filename: './views/index.html', // 输出文件 【注意：这里的根路径是module.exports.output.path】\n            template: TEMPLATE_PATH\n        }),\n        new HtmlWebpackPlugin({\n            title: '商智移动版-运营登录',\n            filename: './views/templogin.html',\n            template: TEMPLATE_PATH\n        }),\n        new HtmlWebpackPlugin({\n            title: '商智移动版-无权限',\n            filename: './views/noauth.html',\n            template: TEMPLATE_PATH\n        }),\n        // new ManifestPlugin(),\n        new webpack.NamedModulesPlugin(),\n        new webpack.HotModuleReplacementPlugin()\n    ],\n    // dev-server 配置项\n    devServer: {\n        hot: true,\n        contentBase: path.DIST_PATH,\n        compress: true,\n        port,\n        host,\n        historyApiFallback: {\n            rewrites: [\n                { from: /^\\/m1\\/tmplogin/, to: '/views/templogin.html' },\n                { from: /^\\/m1?\\/noauth/, to: '/views/noauth.html' },\n                { from: /^\\/m1\\/.*/, to: '/views/index.html' }\n            ]\n        },\n        open: true,\n        openPage: 'm1/homelist/main',\n        // https: true,\n        proxy: [\n            {\n                context: ['/api/**', '**/*.ajax'],\n                target: 'http://yf.msz.jd.com/',\n                secure: true,\n                changeOrigin: true\n            }\n        ],\n        stats: {\n            modules: false,\n            children: false,\n            chunks: false,\n            chunkModules: false,\n            colors: true,\n            performance: true\n        }\n    }\n};\n"
    }
  ]
}